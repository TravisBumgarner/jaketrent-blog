<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: elm | Jake Trent]]></title>
  <link href="http://jaketrent.com/blog/categories/elm/atom.xml" rel="self"/>
  <link href="http://jaketrent.com/"/>
  <updated>2017-01-24T07:53:25-07:00</updated>
  <id>http://jaketrent.com/</id>
  <author>
    <name><![CDATA[Jake Trent]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Debug.log in Elm Pipes]]></title>
    <link href="http://jaketrent.com/post/debug-log-in-elm-pipes/"/>
    <updated>2016-12-15T09:32:00-07:00</updated>
    <id>http://jaketrent.com/post/debug-log-in-elm-pipes</id>
    <content type="html"><![CDATA[<p>There aren't many functions in the standard lib for elm that create side effects.  Elm's <code>Debug.log</code> is one of those exceptions.  It logs to the console.  Here's how it's setup to make console logging whilst piping easier that patting your head whilst rubbing your tummy.</p>

<p><img src="http://i.imgur.com/1c6FH0f.png" alt="elm debug.log" /></p>

<!--more-->


<h2>The signature of Debug.log</h2>

<p>The coolest thing about <code>Debug.log</code> is its type signature:</p>

<p><code>
String -&gt; a -&gt; a
</code></p>

<p>The first parameter is <code>String</code> and traditionally takes some label to identify what you're printing in the log.</p>

<p>The 2nd parameter is <code>a</code>, meaning it can be generically anything.   It's worth noticing that <code>a</code> as the 2nd parameter is required.  This means you'll have to print a value there whether you want to or not.  Otherwise, you won't be fully applying the <code>Debug.log</code> function.</p>

<p>The <em>coolest</em> part is that <code>a</code> is also returned.  This helps with piping because you can just insert <code>Debug.log</code> in your pipe chain.</p>

<h2>Logging in Elm</h2>

<p>Here's a little example.  In this <code>encode</code> function there are several pipes.  There are two helper functions, <code>keyIndex</code> and <code>keyValue</code> that return values that I'd like to investigate.  After each of those values are returned in the pipe chain, a <code>Debug.log</code> is inserted next in the chain with the associated "indexes" or "values" label for log clarity.</p>

<p>```haskell
encode : String -> String
encode phrase =</p>

<pre><code>phrase
    |&gt; String.toLower
    |&gt; String.split ""
    |&gt; List.map (\l -&gt; l |&gt; keyIndex)
    |&gt; Debug.log "indexes"
    |&gt; List.map (\i -&gt; -1 * i)
    |&gt; List.map keyValue
    |&gt; Debug.log "values"
    |&gt; String.join ""
</code></pre>

<p>```</p>

<p>The resulting log for a test run of this code is:</p>

<p><code>
indexes: [24,4,18]
values: ["b","v","h"]
</code></p>

<p>This can be super nice when you're not in a live debug-ready environment.  What are some other ways to gain insight into your code for debugging that you use?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Debug Locally in Elm]]></title>
    <link href="http://jaketrent.com/post/debug-locally-elm/"/>
    <updated>2015-11-28T14:39:00-07:00</updated>
    <id>http://jaketrent.com/post/debug-locally-elm</id>
    <content type="html"><![CDATA[<p>Debugging in Elm is easy once you know where to look.  You need an in-browser tool to help you.  It's almost as simple as just calling <code>console.log</code>, but you can't just put your logging statement anywhere.</p>

<p><img src="http://i.imgur.com/1c6FH0f.png" alt="elm debug locally" /></p>

<!--more-->


<h2>The Online Option</h2>

<p>There's a debugger available online as a part of the elm-lang site at <a href="http://debug.elm-lang.org/">debug.elm-lang.org</a>.  This page explains the principles behind why the debugger works and has the properties it does.  The <a href="http://debug.elm-lang.org/try">debugger is found</a> via clicking the "Debug" button in the top-right corner.</p>

<p>But you don't want to paste your code into the Try Elm page in order to walk through your Elm code.  You need a local option.</p>

<h2>Debugging Locally</h2>

<p>Thankfully you already have the tools to debug locally after you've <a href="http://elm-lang.org/install">installed Elm</a> on your machine.   It comes with <code>elm-reactor</code>.</p>

<p>In order to run your Elm code, go to your shell, <code>cd</code> into your project directory, and type:</p>

<p><code>
$ elm reactor
</code></p>

<p>This will serve up your project directory at <code>http://localhost:8000</code> by default.</p>

<p><img src="http://i.imgur.com/yE93W9g.png" alt="screenshot of elm reactor" /></p>

<p>You will be able to see the project files listed.  There are two links for each Elm program.  Unfortunately, the debug mode link is pretty subtle, looked over by me as just a bullet in the UI.</p>

<ol>
<li>Click the file name, get the run mode</li>
<li>Click the wrench to the left of the file name, get the debug mode</li>
</ol>


<p>Alternately, type your own <code>?debug</code> at the end of any Reactor url to enter debug mode for that file.</p>

<p>Once in debug mode, you should see your code in action in the browser as usual, now with a sidebar for the debugger overlayed on your UI.</p>

<h2>Setting up Watches</h2>

<p>Poor man's debugging has traditionally been logging. When variables are in scope, interrogate them and print the value on the screen.  Elm's debugging story feels about like that, with some cool bells and whistles around it -- like <em>time-traveling</em> debugging, oh my.</p>

<p>In time-travel mode, your debug method of choice will probably be <code>Debug.watch</code>.  In the <a href="http://package.elm-lang.org/packages/elm-lang/core/2.0.1/Debug#watch">docs</a>, it is shown to take 2 arguments:</p>

<p><code>
watch : String -&gt; a -&gt; a
</code></p>

<p>The first argument is the label for the watched data in the debugger.  The second argument is the actual data value.  If I wanted to watch a dimensions tuple, I could write:</p>

<p><code>
Debug.watch "myDimensions" (w, h)
</code></p>

<p>Also note that you have to make your debug expression compile wherever you end up writing it.  I find that the easiest place to put a debug statement into my already-working code is in a <code>let</code> expression.  (Well, "already-working" is used loosely here -- we're debugging after all.)</p>

<p><code>
let
  log = Debug.watch "myDimensions" (w, h)
in
  doStuff myDimensions
</code></p>

<p>Now the watched value will show up in the debugger sidebar.</p>

<p><img src="http://i.imgur.com/PlI83Kq.png" alt="screenshot of elm watched code" /></p>

<p>If you pause the debugger and step backward, you can see the value as it has changed over time.  It's pretty neat, and now you're debugging Elm on your own box!</p>

<p>What other Elm debug tips do you have?</p>
]]></content>
  </entry>
  
</feed>
