
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Pass Values From the Page to AngularJs - Jake Trent</title>
  <meta name="author" content="Jake Trent">

  
  <meta name="description" content="Bootstrap your Angular script with data from your page.">
  <meta name="keywords" content="angularjs, js, bootstrap, data passing, server-side page rendering">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jaketrent.com/post/pass-values-from-page-to-angular/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Jake Trent" type="application/atom+xml">
  <meta name="google-site-verification" content="uvx7BhaUTNz29nQgydsFPRsErfqYBhPEV_svnHvW7H0" />

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-16224416-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1 class="title"><a href="/">Jake Trent</a></h1>
  <div class="desc">
    
      <h2>Power Ballad Coding</h2>
    
  </div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jaketrent.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/categories/code/">Code</a></li>
  <li><a href="/blog/categories/design/">Design</a></li>
  <li><a href="/blog/categories/productivity/">Productivity</a></li>
  <li><a href="/blog/categories/review/">Reviews</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Pass Values From the Page to AngularJs</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-22T07:10:00-07:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>There are simple mechanisms for passing data from your web page to AngularJs.  One directive is called <code>ngInit</code>.  You may well need it.</p>

<p><img src="http://i.imgur.com/wVBKD.png" alt="Angular data passing" /></p>

<!--more-->


<h2>The Use Cases</h2>

<p>The use cases don&#8217;t make a ton of sense without a concrete example.  There are several ways to implement even the most simple example.  If the solution doesn&#8217;t seem to fit the problem, try another way.</p>

<p>For our purposes, let&#8217;s say that we&#8217;re displaying a list of comments on the screen.</p>

<h4>Angular Requests Data</h4>

<p>It&#8217;s easy to put data into scope for AngularJs to use if Angular is the one to request the data initially.  This often will look something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&#39;/comments&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="nf">(comments) -&gt;</span>
</span><span class='line'>    <span class="nv">$scope.comments = </span><span class="nx">comments</span>
</span><span class='line'>  <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then your template will automatically have the data in scope.  And the template (<a href="http://slim-lang.org">Slim</a> syntax used below) can look like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">h1</span> <span class="no">Comments</span>
</span><span class='line'><span class="n">ul</span>
</span><span class='line'>  <span class="n">li</span> <span class="n">ng</span><span class="o">-</span><span class="n">repeat</span><span class="o">=</span><span class="s2">&quot;comment in comments&quot;</span>
</span><span class='line'>    <span class="o">|</span> <span class="p">{{</span> <span class="n">comment</span> <span class="p">}}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now when we add a new comment via Ajax, we can push it right into the comment collection, and the page is updated by Angular with the appropriate data.  Or if we want to perform an operation on a pre-existing comment, it&#8217;s easy to do via an AJAX operation and display the result.</p>

<h4>Server Renders Data Initially</h4>

<p>Sometimes it&#8217;ll make sense for the server to render the data.  Often this kind of data will be the main content on the page.  When the client receives the page, we want the data display to be immediate.  We don&#8217;t want them to load a page with a spinner for the main content, then wait and watch it spin while the real content is requested secondarily.</p>

<p>If the server was to initially print the comments, like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">h1</span> <span class="no">Comments</span>
</span><span class='line'><span class="n">ul</span>
</span><span class='line'>  <span class="o">-</span> <span class="n">comments</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">comment</span><span class="o">|</span>
</span><span class='line'>    <span class="n">li</span>
</span><span class='line'>      <span class="o">=</span> <span class="n">comment</span>
</span></code></pre></td></tr></table></div></figure>


<p>We still might want to do AJAX&#8217;y things with a comment, such as like it.  When I like it, I don&#8217;t want the browser to have to refresh, so I want to make Angular do this for me.</p>

<h2>ngInit Passes Angular Server Data</h2>

<p>Angular provides a nice directive, <code>ngInit</code> for passing Angular data.  It&#8217;s a mechanism by which you can bootstrap your scripts with the data they need to function.  A mixture of server rendering and client-side AJAX requests on the same data will probably mean that you&#8217;re going to use this directive.</p>

<p>From the <code>ngInit</code> docs:</p>

<blockquote><p> The ngInit directive specifies initialization tasks to be executed before the template enters execution mode during bootstrap.</p></blockquote>

<p>Our server/client mixture code might look something like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">h1</span> <span class="no">Comments</span>
</span><span class='line'><span class="n">ul</span>
</span><span class='line'>  <span class="o">-</span> <span class="n">comments</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">comment</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span>
</span><span class='line'>    <span class="n">li</span> <span class="n">ng</span><span class="o">-</span><span class="n">init</span><span class="o">=</span><span class="s2">&quot;commentLikeCount[i]=</span><span class="si">#{</span><span class="n">comment</span><span class="o">.</span><span class="n">likeCount</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>      <span class="o">=</span> <span class="n">comment</span>
</span><span class='line'>      <span class="o">|</span> <span class="no">Likes</span> <span class="k">for</span> <span class="n">this</span> <span class="n">comment</span><span class="p">:</span> <span class="p">{{</span><span class="n">commentLikeCount</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">}}</span>
</span><span class='line'>      <span class="n">a</span> <span class="n">ng</span><span class="o">-</span><span class="n">click</span><span class="o">=</span><span class="s2">&quot;like(commentLikeCount[i])&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>It&#8217;s important to realize where data is coming from in this example.  The syntax <code>=</code> as in <code>= comment</code> and <code>#{}</code> as in <code>#{comment.likeCount}</code> are server-rendered bits.  As you know, the curlies and the ng attribute syntax is for Angular&#8217;s client side rendering.</p>

<p>So how has this mixture bought us anything?</p>

<ol>
<li>The server renders the comments initially.  This makes the display immediate when the browser loads the page.</li>
<li>We init the value of <code>commentLikeCount</code>, making it available for Angular to display once the client compiles the template.</li>
<li>Since Angular has a count of the likes, it can easily update it and redisplay without a page reload after calling <code>like()</code> to increment the count.</li>
</ol>


<p>Frankly, the mixture feels a little bit odd to me.  I&#8217;ve seen it work.  I know there are different ways to get this done.  I think there are probably better ways.  What has worked well for you in similar use cases?</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jake Trent</span></span>

      








  


<time datetime="2013-02-22T07:10:00-07:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/code/'>Code</a>, <a class='category' href='/blog/categories/angularjs/'>angularjs</a>, <a class='category' href='/blog/categories/js/'>js</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://jaketrent.com/post/pass-values-from-page-to-angular/" data-via="" data-counturl="http://jaketrent.com/post/pass-values-from-page-to-angular/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/post/angularjs-find-element-in-context/" title="Previous Post: AngularJs Find Element in Context">&laquo; AngularJs Find Element in Context</a>
      
      
        <a class="basic-alignment right" href="/post/serve-json-from-sinatra/" title="Next Post: Serve Json from Sinatra">Serve Json from Sinatra &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <ul id="social">
    <li><a class="social social-github" href="http://github.com/jaketrent" title="Github" class="first">Github</a></li>
    <li><a class="social social-twitter" href="http://twitter.com/jaketrent" title="Twitter">Twitter</a></li>
    <li><a class="social social-linkedin" href="http://linkedin.com/in/jaketrent" title="LinkedIn">LinkedIn</a></li>
    <li><a class="social social-googleplus" href="https://plus.google.com/115032056022257436849?rel=author" title="Google Plus">Google Plus</a></li>
    <li><a class="social social-rss" href="/atom.xml" title="RSS">RSS</a></li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/post/ember-parent-templates/">Ember Parent Templates</a>
      </li>
    
      <li class="post">
        <a href="/post/precompile-ember-templates/">Precompile Ember Templates</a>
      </li>
    
      <li class="post">
        <a href="/post/match-ember-handlebars-version/">Match Ember and Handlebars Versions</a>
      </li>
    
      <li class="post">
        <a href="/post/utahjs-conf-2013-review/">UtahJS Conf 2013 Review</a>
      </li>
    
      <li class="post">
        <a href="/post/test-settimeout-with-jasmine/">Test setTimeout with Jasmine</a>
      </li>
    
  </ul>
</section>




<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/115032056022257436849?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Jake Trent -
  <a href="/blog/archives">Archives</a> -
  <a href="/atom.xml">Feed</a> -
  <a href="/sitemap.xml">Sitemap</a> -
  <a href="https://github.com/jaketrent/jaketrent-blog/issues">Report a Bug</a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jaketrent';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jaketrent.com/post/pass-values-from-page-to-angular/';
        var disqus_url = 'http://jaketrent.com/post/pass-values-from-page-to-angular/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
