
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Disable ngClick - Jake Trent</title>
  <meta name="author" content="Jake Trent">

  
  <meta name="description" content="ngClicks can go on anything. Your program might require that they be disabled at certain points. Here's an easy directive to help.">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jaketrent.com/post/disable-ng-click/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Jake Trent" type="application/atom+xml">
  <meta name="google-site-verification" content="uvx7BhaUTNz29nQgydsFPRsErfqYBhPEV_svnHvW7H0" />

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-16224416-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div class="container">
    <nav class="main-nav" role="navigation"><ul class="main-nav-list">
  <li class="main-nav-item">
    <a class="main-nav-link" href="/blog/categories/code/">Code</a>
  </li>
  <li class="main-nav-item">
    <a class="main-nav-link" href="/blog/categories/design/">Design</a>
  </li>
  <li class="main-nav-item">
    <a class="main-nav-link" href="/blog/categories/productivity/">Productivity</a>
  </li>
  <li class="main-nav-item">
    <a class="main-nav-link" href="/blog/categories/review/">Reviews</a>
  </li>
</ul>
</nav>
    <div class="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Disable ngClick</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-08-14T07:53:00-06:00" pubdate data-updated="true">Aug 14<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Angular&#8217;s ngClicks can be attached to anything.  This makes it easy to add interactivity to elements on the DOM.  Your program might require that these click callbacks be disabled at certain points, such as during form processing.  ngClick doesn&#8217;t have a toggle built in.  Let&#8217;s build one that might help.</p>

<p><img src="http://i.imgur.com/wVBKD.png" alt="Angularjs" /></p>

<!--more-->


<p>In our app we&#8217;re going to track the state of the UI via various events that get passed in scope.  We slap our directive as an attribute on an element and it will respond by disabling or enabling on certain events.  Here&#8217;s the directive:</p>

<figure class='code'><figcaption><span>disable-toggle.coffee</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='coffeescript'><span class='line'><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s">&#39;app.directives&#39;</span><span class="p">).</span><span class="nx">directive</span> <span class="s">&#39;disableToggle&#39;</span><span class="p">,</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="nv">restrict: </span><span class="s">&#39;A&#39;</span>
</span><span class='line'>  <span class="nv">replace: </span><span class="kc">false</span>
</span><span class='line'>  <span class="nv">link: </span><span class="nf">(scope, element, attrs) -&gt;</span>
</span><span class='line'>    <span class="nv">defaultDisableEvt = </span><span class="s">&#39;click:disable&#39;</span>
</span><span class='line'>    <span class="nv">defaultEnableEvt = </span><span class="s">&#39;click:enable&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">disableEvt = </span><span class="nx">attrs</span><span class="p">.</span><span class="nx">disableEvt</span> <span class="o">||</span> <span class="nx">defaultDisableEvt</span>
</span><span class='line'>    <span class="nv">enableEvt = </span><span class="nx">attrs</span><span class="p">.</span><span class="nx">enableEvt</span> <span class="o">||</span> <span class="nx">defaultEnableEvt</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">disableEvts = </span><span class="nx">disableEvt</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\ *?,\ *?/</span><span class="p">)</span>
</span><span class='line'>    <span class="nv">enableEvts = </span><span class="nx">enableEvt</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\ *?,\ *?/</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="nx">evt</span> <span class="k">in</span> <span class="nx">disableEvts</span>
</span><span class='line'>      <span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span> <span class="nx">evt</span><span class="p">,</span> <span class="nf">(evt) -&gt;</span>
</span><span class='line'>        <span class="nx">element</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;disabled&#39;</span><span class="p">,</span> <span class="s">&#39;disabled&#39;</span>
</span><span class='line'>        <span class="nx">element</span><span class="p">.</span><span class="nx">addClass</span> <span class="s">&#39;is-disabled&#39;</span>
</span><span class='line'>        <span class="nv">scope.disabledToggled = </span><span class="kc">true</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="nx">evt</span> <span class="k">in</span> <span class="nx">enableEvts</span>
</span><span class='line'>      <span class="nx">scope</span><span class="p">.</span><span class="nx">$on</span> <span class="nx">evt</span><span class="p">,</span> <span class="nf">(evt) -&gt;</span>
</span><span class='line'>        <span class="nx">element</span><span class="p">.</span><span class="nx">removeAttr</span> <span class="s">&#39;disabled&#39;</span>
</span><span class='line'>        <span class="nx">element</span><span class="p">.</span><span class="nx">removeClass</span> <span class="s">&#39;is-disabled&#39;</span>
</span><span class='line'>        <span class="nv">scope.disabledToggled = </span><span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>The directive allows for listening on multiple events.  This is useful if your button should be disabled/enabled via multiple events.  Just separate your event list with commas.  If you don&#8217;t want to specify any events, the directive uses two default events, &#8216;click:disable&#8217; and &#8216;click:enable&#8217;.</p>

<p>The directive sets the <code>disabled</code> attribute, commonly used in form fields.  It also sets the <code>is-disabled</code> class so your app can style this state consistently in the UI.</p>

<p>Lastly, the directive also sets a <code>scope.disabledToggled</code> variable on the scope of the element.  This will be useful for elements which are not form elements and which do not prevent clicking just because their <code>disabled</code> attribute is set to <code>disabled</code>.  Instead, we&#8217;ll use this value to short-circuit the <code>ng-click</code> event itself.</p>

<p>So here it is in action on the template:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>  <span class="nt">&lt;button</span> <span class="na">ng-click=</span><span class="s">&quot;disabledToggled || doClickyThings()&quot;</span>
</span><span class='line'>          <span class="na">disable-toggle</span> <span class="na">enable-evt=</span><span class="s">&quot;click:enable,photo:clear&quot;</span> <span class="na">disable-evt=</span><span class="s">&quot;photo:add&quot;</span><span class="nt">&gt;</span>Click Me<span class="nt">&lt;/button&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we&#8217;re setting custom events for disabling and enabling the button.  And note the <code>ng-click</code> value.  The <code>doClickyThings()</code> function will not get called if <code>disabledToggled</code> is true.</p>

<p>So, what do you think.  Is there an easier way to get this kind of functionality?  What could we do to make it better?</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jake Trent</span></span>

      








  


<time datetime="2013-08-14T07:53:00-06:00" pubdate data-updated="true">Aug 14<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/code/'>Code</a>, <a class='category' href='/blog/categories/angularjs/'>angularjs</a>, <a class='category' href='/blog/categories/js/'>js</a>
  
</span>


    </p>
    
      Included file 'post/sharing.html' not found in _includes directory
    
    <p class="meta">
      
        <a class="basic-alignment left" href="/post/preload-route-data-angular/" title="Previous Post: Preload Route Data in Angular">&laquo; Preload Route Data in Angular</a>
      
      
        <a class="basic-alignment right" href="/post/spies-sinon-chai/" title="Next Post: Spies with Sinon and Chai">Spies with Sinon and Chai &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <ul id="social">
    <li><a class="social social-github" href="http://github.com/jaketrent" title="Github" class="first">Github</a></li>
    <li><a class="social social-twitter" href="http://twitter.com/jaketrent" title="Twitter">Twitter</a></li>
    <li><a class="social social-linkedin" href="http://linkedin.com/in/jaketrent" title="LinkedIn">LinkedIn</a></li>
    <li><a class="social social-googleplus" href="https://plus.google.com/115032056022257436849?rel=author" title="Google Plus">Google Plus</a></li>
    <li><a class="social social-rss" href="/atom.xml" title="RSS">RSS</a></li>
  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/post/ng-conf-review/">Ng-Conf Review</a>
      </li>
    
      <li class="post">
        <a href="/post/developing-an-ember-edge-review/">Developing an Ember Edge Review</a>
      </li>
    
      <li class="post">
        <a href="/post/permit-array-rails-strong-parameters/">Permit Array in Rails Strong Parameters</a>
      </li>
    
      <li class="post">
        <a href="/post/grunt-init-exercism-io/">Grunt-init Exercism.io</a>
      </li>
    
      <li class="post">
        <a href="/post/add-zerigo-dns-to-heroku/">Add Zerigo DNS to Heroku</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <div class="container">
    <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Jake Trent -
  <a href="/blog/archives">Archives</a> -
  <a href="/atom.xml">Feed</a> -
  <a href="/sitemap.xml">Sitemap</a> -
  <a href="https://github.com/jaketrent/jaketrent-blog/issues">Report a Bug</a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'jaketrent';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jaketrent.com/post/disable-ng-click/';
        var disqus_url = 'http://jaketrent.com/post/disable-ng-click/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


<!--[if !(lt IE 8)]><!-->
<script type="text/javascript">
  (function(){
    var e = document.createElement('script'); e.type='text/javascript'; e.async = true;
    e.src = document.location.protocol + '//d1agz031tafz8n.cloudfront.net/thedaywefightback.js/widget.min.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(e, s);
  })();
</script>
<!--<![endif]-->




</body>
</html>
